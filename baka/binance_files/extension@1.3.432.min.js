/*! For license information please see extension@1.3.432.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM"),require("commonUMD"),require("dataUMD"),require("httpSDK"),require("tslib"),require("utilsUMD")):"function"==typeof define&&define.amd?define("extensionUMD",["React","ReactDOM","commonUMD","dataUMD","httpSDK","tslib","utilsUMD"],t):"object"==typeof exports?exports.extensionUMD=t(require("React"),require("ReactDOM"),require("commonUMD"),require("dataUMD"),require("httpSDK"),require("tslib"),require("utilsUMD")):e.extensionUMD=t(e.React,e.ReactDOM,e.commonUMD,e.dataUMD,e.httpSDK,e.tslib,e.utilsUMD)}(this,((e,t,n,r,o,i,a)=>(()=>{"use strict";var l,c={3299:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Re});var r=n(1024),o=n.n(r),i=n(6004),a=n(5226),l=n(3120),c=n(2568),u=n(6093),s=n(5353),f=n(1458),d=n(1182);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const h=function(){var e,t,n=(e=(0,r.useState)("none"),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1],a=function(){var e=window.innerWidth;i(e<768?"mobile":e<1440?"tablet":"desktop")};return(0,r.useEffect)((function(){return a(),window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[]),o};var m=n(5906),v=n(4363);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(){var e=(0,d.useTheme)().theme,t=y((0,r.useState)(e),2),n=t[0],o=(t[1],y((0,r.useMemo)((function(){return["light"===n?m.R:m._,"light"===n?v.X:v.k]}),[n]),2)),i=o[0],a=o[1];return{bodyTheme:n,themeColors:i,themeExtraColors:a}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=[/^\/[a-zA-Z-]+\/price/i,/^\/[a-zA-Z-]+\/how-to-buy/i,/^\/[a-zA-Z-]+\/altcoins/i,/^\/[a-zA-Z-]+\/markets\/overview/i];const _=function(){var e,t,n,o,a=(0,d.useLanguage)().language,p=(0,d.useNavI18n)().getI18nTxt,m=(0,d.useCommonEnv)().envs.domain,v=b().bodyTheme,y=(0,d.useUserLoginStatus)(),g=y.value,x=y.loading,_=w((0,r.useState)(!1),2),S=_[0],k=_[1],L=w((0,r.useState)(!1),2),C=L[0],I=L[1],O=(0,r.useRef)(!1),A=(0,d.useCommonEnv)().envs.STATIC_HOST,j="mobile"===h(),T=(0,l.L)().isHybrid,R=(0,r.useCallback)((function(){var e;O.current||(O.current=!0,console.log("bannerInitiator called"),e=window.location.pathname,E.some((function(t){return t.test(e)}))?(console.log("call topBarAndTopCTA API to show banner"),(0,f.get)("/bapi/composite/v1/public/growth-activity/loyalty/onboarding/topBarAndTopCTA").then((function(e){var t=e.data;console.log("topBarAndTopCTA API call",t),null!=t&&t.showTopBar&&I(!0)}))):console.log("validatePageUrl = false"))}),[]);(0,r.useEffect)((function(){x||g||k(!0)}),[g,x]),e=function(){R()},t=S,n=(0,r.useRef)(!1),o=(0,r.useCallback)((function(){n.current||(console.log("UserActionTrigger"),n.current=!0,e())}),[]),(0,r.useEffect)((function(){var e,n,r;t&&(e=function(){window.removeEventListener("mousemove",e,!1),console.log("mousemoveListener triggered"),o()},n=function(){window.removeEventListener("touchstart",n,!1),console.log("touchstartListener triggered"),o()},r=function(){window.removeEventListener("scroll",r,!1),console.log("scrollListener triggered"),o()},window.addEventListener("mousemove",e,!1),window.addEventListener("touchstart",n,!1),window.addEventListener("scroll",r,!1))}),[t]);var N=(0,r.useCallback)((function(){(0,i.j)("webClick",{elementId:"footer_banner_close",pageName:"extension",lang:a}),I(!1)}),[a]),M=(0,r.useCallback)((function(){(0,i.j)("webClick",{elementId:"footer_banner_click",pageName:"extension",lang:a});var e="https://accounts.".concat(m,"/").concat(a,"/register?registerChannel=footer_banner");window.open(e,"_blank")}),[m,a]);if(T||!C||j)return null;var D="dark"===v?"dark_banner_bg.svg":"light_banner_bg.svg",P='url("'.concat(A,"/static/images/home/").concat(D,'")');return React.createElement("div",{className:"IncentiveBanner",style:{backgroundImage:P}},React.createElement("div",{className:"IncentiveBanner_content"},React.createElement(c.Z,{className:"IncentiveBanner_logo",src:"".concat(A,"/static/images/home/incentive_logo.svg")}),React.createElement("div",{className:"IncentiveBanner_text"},p("Register now and receive up to 100 USDT in rewards"))),React.createElement(u.Z,{onClick:M,sz:"small",className:"IncentiveBanner_register_btn"},p(j?"ba-Register":"Register Now")),React.createElement(s.Z,{onClick:N,size:24,className:"IncentiveBanner_close_btn"}))};var S=n(1996);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function L(){L=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),l=new C(o||[]);return r(a,"_invoke",{value:x(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function h(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(m=y);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,i,a,l){var c=s(e[r],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==k(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),c(g,l,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function C(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function I(e,t){return O.apply(this,arguments)}function O(){var e;return e=L().mark((function e(t,n){var r,o,i,a,l,c,u;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.post)("/bapi/apex/v1/public/apex/marketing/web/commonConfig",{keys:["com.globalRedirection.disable"]});case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("handleRedirect, post commonConfig error = ",e.t0);case 9:if(a=0,null!==(r=i)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&o.res&&(a=i.data.res["com.globalRedirection.disable"],console.log("handleRedirect, isDisabledRedirection = ",a)),l=localStorage.getItem("_GLOBALJS_REDIRECTION_DISABLE"),c=window.location.hostname.split("."),u=c[c.length-2],!(l&&"qa1fdg"===u||1===a)){e.next=18;break}return console.log("handleRedirect, redirection is disabled"),e.abrupt("return");case 18:if(console.log("handleRedirect, url = ",t),!n){e.next=22;break}return window.location.replace(t),e.abrupt("return");case 22:window.location.href=t;case 23:case"end":return e.stop()}}),e,null,[[0,6]])})),O=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,l,"next",e)}function l(e){C(i,r,o,a,l,"throw",e)}a(void 0)}))},O.apply(this,arguments)}function A(){var e=(0,d.useLanguage)().language,t=(0,d.useComplianceActionCheck)().value;return(0,r.useEffect)((function(){var n,r,o;if(console.log("set _EXTENSION_REDIRECT_FLAG"),window._EXTENSION_REDIRECT_FLAG=!0,null!=t&&t.success&&(null==t||null===(n=t.data)||void 0===n||!n.pass)&&"web"===(null==t||null===(r=t.data)||void 0===r?void 0:r.clientType)){var a=((null==t?void 0:t.data)||{}).actionType,l=((null==t||null===(o=t.data)||void 0===o?void 0:o.actionInfo)||{}).actionUrl;if(l){if(console.log("ComplianceRedirect actionUrl = ",l),(0,i.j)("pageView",{elementID:"common_widget_extension_compliance_redirect",pageName:"common_widget_extension",df_3:l}),"redirect_rel"===a){if(l.startsWith("/"))return void I("https://www.%suffixOrigin%".concat(l).replace("%suffixOrigin%",(0,S.getLevelDomain)(2)),!0);var c=l;I(window.location.href.replace("/"+e,"/"+c),!0)}"redirect_abs"===a&&I(l,!0)}}}),[t]),React.createElement(React.Fragment,null)}var j=n(314),T=n(7076),R=n.n(T),N=n(3992),M=n.n(N);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}R().extend(M());var P=n(2779),U=n.n(P);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e){var t=e.banner,n=e.themeColors,o=e.extInfo,i=(0,l.L)().isHybrid,a=(0,d.useLanguage)().language,c=(0,d.useI18n)(t.i18nNamespace||"com-compliance").getI18nText,u=B((0,r.useState)(!0),2),f=u[0],p=u[1],h=(0,r.useCallback)((function(e){var t,r=e||{},i=r.bannerText,l=void 0===i?"":i,u=r.bannerLinks,s=void 0===u?[]:u,f=r.useI18nKey,d=r.bannerTextMultiLang,p=void 0===d?[]:d,h=l;if(f)h=c(l);else{var m=p.find((function(e){return e.selectedLang===a}));null!=m&&m.text&&(h=m.text)}return s.forEach((function(e){var t,r,o=null===(t=e.linkURL)||void 0===t||null===(r=t.replace("%suffixOrigin%",(0,S.getLevelDomain)(2)))||void 0===r?void 0:r.replace("%locale%",a),i=e.linkText;f&&(i=c(e.linkText));var l='<a href="'.concat(o,'" class="CommonWidgetCompliance_content_link" style="color: ').concat(n.textBrand,'" target="_blank">').concat(i,"</a>");if(e.key){var u=new RegExp("".concat(e.key),"g");h=u.test(h)?h.replace(u,l):"".concat(h," ").concat(l)}else h="".concat(h," ").concat(l)})),null!=o&&o.enableWDtime&&h.includes("{{endTime}}")&&(h=h.split("{{endTime}}").join((t=null==o?void 0:o.enableWDtime,R()(t).utc().format("YYYY/MM/DD HH:mm")))),h}),[null==o?void 0:o.enableWDtime,c,a,n.textBrand]),m=(0,r.useCallback)((function(){p(!1)}),[]);if(!f)return null;if(i&&(null==t||!t.showInWebview))return null;var v=h(t);return v?React.createElement("div",{key:t.bannerText,className:"CommonWidgetCompliance_content",style:{color:n.textPrimary}},React.createElement("div",{dangerouslySetInnerHTML:{__html:v}}),t.canBeClosed&&React.createElement(s.Z,{onClick:m,size:24,className:"CommonWidgetCompliance_close_btn",style:{color:n.bg4}})):null}var W=function(){var e=b().themeColors,t=(0,d.useComplianceActionCheck)().value,n=B((0,r.useState)([]),2),o=n[0],a=n[1],l=(0,r.useRef)(!1);(0,r.useEffect)((function(){var e,n;if(null!=t&&t.success&&(null==t||null===(e=t.data)||void 0===e||!e.pass)){var r,o,c=((null==t||null===(n=t.data)||void 0===n?void 0:n.actionInfo)||{}).bannerInfo,u=void 0===c?[]:c;console.log("ComplianceBanners, bannerInfo = ",u),a(u),!l.current&&u.length>0&&(l.current=!0,console.log("ComplianceBanner show"),(0,i.j)("pageView",{elementID:"common_widget_extension_compliance_banner",pageName:"common_widget_extension",df_3:String((null==u||null===(r=u[0])||void 0===r||null===(o=r.extraInfo)||void 0===o?void 0:o.errorCode)||"client_no_code")}))}}),[t]);var c=(0,r.useMemo)((function(){var e;return null==t||null===(e=t.data)||void 0===e?void 0:e.extInfo}),[t]);return React.createElement(React.Fragment,null,o.map((function(t){return React.createElement(G,{key:t.bannerText,banner:t,themeColors:e,extInfo:c})})))};function F(){var e,t,n,o,i,a,l,c,u,s,f,p,h=(e={portalClassName:U()("CommonWidgetCompliance","_CWC")},t=e.portalClassName,n=b().themeColors,o=(0,d.useComplianceActionCheck)().value,i=(0,r.useRef)(null),f=(0,r.useState)(null),p=2,a=function(e){if(Array.isArray(e))return e}(f)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(f,p)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(f,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=a[0],c=a[1],u="__APP_HEADER",s=(0,r.useMemo)((function(){var e=document.getElementById(u);return!!e&&"sticky"===window.getComputedStyle(e).position}),[]),(0,r.useEffect)((function(){var e,n=((null==o||null===(e=o.data)||void 0===e?void 0:e.actionInfo)||{}).bannerInfo,r=null==n?void 0:n[0];if(r){var a=null==r?void 0:r.shouldSticky;if(i.current||(i.current=document.createElement("div"),i.current.className=t,c(i.current)),a)if(s){var l=document.getElementById(u);null==l||l.prepend(i.current)}else i.current.classList.add("CommonWidgetCompliance_sticky"),document.body.prepend(i.current);else document.body.prepend(i.current);return function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.parentNode;t&&i.current&&t.removeChild(i.current)}}}),[o,s]),(0,r.useEffect)((function(){l&&(l.style.backgroundColor=n.bg3)}),[n,l]),l);return React.createElement(React.Fragment,null,h&&(0,j.createPortal)(React.createElement(W,null),h))}var z=n(3941),q=n(7560),Y=n(2680),H=n(5114),K=n(6047),V=n(4561),$=n(3408),X=function(e){return e.OPEN_LINK="OPEN_LINK",e.CUSTOM="CUSTOM",e}({}),J=function(e){return e.BASIC="basic",e.TERMS="terms",e}({}),Q="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o().useLayoutEffect:o().useEffect;function ee(e){var t=o().useRef(e);return Q((function(){t.current=e})),o().useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.apply(null,r)}),[])}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re,oe,ie="com-compliance";function ae(e){var t=e.popupInfo,n=(0,l.L)().isHybrid,o=(0,d.useLanguage)().language,i=te((0,r.useState)(!0),2),a=i[0],c=i[1],s=(0,d.useI18n)(t.i18nNamespace||ie).getI18nText;t.useI18nKey&&["title","content","confirmText","cancelText"].forEach((function(e){t[e]=s(t[e])}));var f=ee((function(e){switch(e){case"warning":return React.createElement(Y.Z,null);case"error":return React.createElement(H.Z,null);case"success":return React.createElement(K.Z,null);default:return React.createElement(V.Z,null)}})),p=ee((function(){var e;if(console.log("onConfirm"),(null==t||null===(e=t.confirmAction)||void 0===e?void 0:e.type)===X.OPEN_LINK){var n,r,i,a=null==t||null===(n=t.confirmAction)||void 0===n||null===(r=n.url)||void 0===r||null===(i=r.replace("%suffixOrigin%",(0,S.getLevelDomain)(2)))||void 0===i?void 0:i.replace("%locale%",o);window.open(a,"_blank")}c(!1)})),h=ee((function(){console.log("onCancel"),c(!1)}));return!n||null!=t&&t.showInWebview?React.createElement(z.ZP,{className:"CommonWidgetCompliance-popup-box"},React.createElement($.PopupModal,{visible:a},React.createElement(q.Z,{actions:React.createElement("div",{className:"flex-column"},React.createElement(u.Z,{className:"width-100",onClick:p},t.confirmText),t.cancelText&&React.createElement(u.Z,{variant:"secondary",className:"mt-14 width-100",onClick:h},t.cancelText)),description:t.content,icon:f(t.type),title:t.title}))):null}function le(){var e=(0,d.useComplianceActionCheck)().value,t=te((0,r.useState)(null),2),n=t[0],o=t[1],a=n&&(!(null!=n&&n.category)||(null==n?void 0:n.category)===J.BASIC);return(0,r.useEffect)((function(){var t,n;if(null!=e&&e.success&&(null==e||null===(t=e.data)||void 0===t||!t.pass)){var r=((null==e||null===(n=e.data)||void 0===n?void 0:n.actionInfo)||{}).popupInfo;r&&o(r)}}),[e]),(0,r.useEffect)((function(){var e;a&&(console.log("CompliancePopup show"),(0,i.j)("pageView",{elementID:"common_widget_extension_compliance_popup",pageName:"common_widget_extension",df_3:String((null==n||null===(e=n.extraInfo)||void 0===e?void 0:e.errorCode)||"client_no_code")}),console.log("CompliancePopup, popupInfo= ",n))}),[n,a]),a?React.createElement(ae,{popupInfo:n}):null}function ce(){var e,t,n=document.getElementById("globalmodal");n&&(null==n||null===(e=n.parentNode)||void 0===e||e.removeChild(n)),(t=document.getElementsByTagName("html")[0]).style.overflowY=re,t.style.height=oe}function ue(){var e,t=document.getElementById("bniframexxxuw"),n=null==t||null===(e=t.contentDocument)||void 0===e?void 0:e.getElementById("pre-chat-container");n?n.style.display="none":setTimeout((function(){ue()}),50)}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fe="com-compliance";function de(e){var t=e.popupInfo,n=(0,d.useLanguage)().language,o=(0,d.useI18n)(t.i18nNamespace||fe),i=o.getI18nText,a=o.i18n,l=(0,r.useMemo)((function(){return!(a&&Object.keys(a).length>0)}),[a]);t.useI18nKey&&["title","content","confirmText","cancelText"].forEach((function(e){t[e]=i(t[e])}));var c=ee((function(){var e,r;console.log("start showComplianceTermModal");var o=null===(e=t.termsBodyUrl)||void 0===e||null===(r=e.replace("%suffixOrigin%",(0,S.getLevelDomain)(2)))||void 0===r?void 0:r.replace("%locale%",n);!function(e){var t=e.code,n=e.termsBodyUrl,r=e.nextOpenInterval||43200,o=e.confirmText,i=e.cancelText||"Cancel",a=e.confirmCountdown||5,l=!!i,c=e.style||{},u=e.isScrollHide||!1,s=-1===document.cookie.indexOf("theme=dark"),f="".concat(t,"-tnc-popup");if(/\/my\/settings\/profile|\/need-kyc|\/privacy|\/legal\/terms-uk|\/about-legal|\/compliance\/.*/.test(window.location.href))console.log("showComplianceTermModal false, cause: url match");else{if(console.log("should showComplianceTermModal"),l){var d=localStorage.getItem(f);if(d&&Date.now()-parseInt(d,10)<1e3*r)return void console.log("showComplianceTermModal false, cause: less than nextOpenInterval")}var p=null,h=document.getElementById("globalmodal");if(!h){var m;m=document.getElementsByTagName("html")[0],re=m.style.overflowY,oe=m.style.height,m.style.overflowY="hidden",m.style.height="100vh",(h=document.createElement("div")).setAttribute("name","globalmodal"),h.setAttribute("id","globalmodal"),h.style.height="100vh",h.style.boxSizing="border-box",h.style.width="100%",h.style.position="fixed",h.style.top="0px",h.style.right="0px",h.style.left="0px",h.style.bottom="0px",h.style.zIndex="10086",h.style.background="rgba(0, 0, 0, 0.55)",h.style.display="flex",h.style.alignItems="center",h.style.justifyContent="center";var v=document.createElement("div");v.setAttribute("name","modal"),v.style.display="flex",v.style.position="relative",v.style.width=c.width||"100%",v.style.height=c.height||"calc(100vh - 144px)",v.style.margin=c.margin||"16px",v.style.maxWidth="769px",v.style.background=s?"white":"#181A20",v.style.borderRadius="8px",v.style.boxShadow="0px 0px 1px rgba(24, 26, 32, 0.1), 0px 16px 32px rgba(71, 77, 87, 0.16), 0px 8px 16px rgba(24, 26, 32, 0.16)",v.style.flexDirection="column",v.style.padding=c.padding||"16px 24px 24px 8px";var y=document.createElement("div");y.setAttribute("name","scrollHide"),y.style.position="absolute",y.style.width="3px",y.style.top="24px",y.style.right="8px",y.style.bottom="80px",y.style.background=s?"white":"#181A20";var g=document.createElement("iframe");g.setAttribute("name","bniframexxxuw"),g.setAttribute("id","bniframexxxuw"),g.setAttribute("allowtransparency","true"),g.setAttribute("width","100%"),g.setAttribute("height","100%"),g.setAttribute("style","background-color=transparent"),g.setAttribute("frameborder","0"),g.setAttribute("src",n),g.attachEvent?g.attachEvent("onload",(function(){ue()})):g.onload=function(){ue()},v.appendChild(g),u&&v.appendChild(y);var b=document.createElement("div");if(b.style.display="flex",b.style.justifyContent="center",l){var w=document.createElement("button");w.style.height="40px",w.style.color="#1E2329",w.style.outline="none",w.style.border="none",w.style.background="#EAECEF",w.style.borderRadius="4px",w.style.display="flex",w.style.alignItems="center",w.style.justifyContent="center",w.style.margin="24px 0",w.style.fontSize="16px",w.style.lineHeight="24px",w.style.fontWeight="500",w.style.marginBottom="0px",w.style.cursor="pointer",w.style.opacity="1",w.style.marginRight="16px",w.style.paddingRight="12px",w.style.paddingLeft="12px",w.innerText=i,w.onclick=function(){localStorage.setItem(f,Date.now().toString()),ce()},b.appendChild(w)}var x=document.createElement("button");x.style.width=c.btnWidth||"auto",x.style.height="40px",x.style.color="#1E2329",x.style.outline="none",x.style.border="none",x.style.background="#fcd535",x.style.borderRadius="4px",x.style.display="flex",x.style.alignItems="center",x.style.justifyContent="center",x.style.padding="0 12px",x.style.margin="24px 0",x.style.fontSize="16px",x.style.lineHeight="24px",x.style.fontWeight="500",x.style.marginBottom="0px",x.style.cursor="pointer",x.style.opacity="1",x.innerText=o,x.disabled=!0,x.onclick=function(){var e;if(!p){null===(e=g.contentWindow)||void 0===e||e.postMessage({type:"submit_terms"},"*"),x.style.cursor="not-allowed",x.style.opacity="0.6";var t=a;p=setInterval((function(){--t<=0?(clearInterval(p),ce()):x.innerText=o+" ("+t+")"}),1e3)}},n&&window.addEventListener("message",(function(e){console.log("ComplianceTerm message received",e.data);var t=e.data||{},n=t.type,r=t.buttonDisabled;"muses_terms_checkbox_event"===n&&(x.disabled=r,x.style.cursor=r?"not-allowed":"pointer",x.style.opacity=r?"0.6":"1")}));var E=window.matchMedia("(max-width: 768px)");_(E),E.addListener(_),b.appendChild(x),v.appendChild(b),h.appendChild(v),document.body.appendChild(h)}}function _(e){e.matches?v.style.padding=c.padding||"20px 16px 24px 0":v.style.padding=c.padding||"32px 24px 24px 8px"}}({code:t.extraInfo.errorCode,termsBodyUrl:o,nextOpenInterval:t.nextOpenInterval,confirmText:t.confirmText,cancelText:t.cancelText,isShowCancel:!!t.cancelText})}));return(0,r.useEffect)((function(){l||t.category!==J.TERMS||c()}),[l,c,t]),React.createElement(z.ZP,{className:"CommonWidgetCompliance-term-box"})}function pe(){var e,t,n=(0,d.useComplianceActionCheck)().value,o=(e=(0,r.useState)(null),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1],c=a&&(null==a?void 0:a.category)===J.TERMS;return(0,r.useEffect)((function(){var e,t;if(null!=n&&n.success&&(null==n||null===(e=n.data)||void 0===e||!e.pass)){var r=((null==n||null===(t=n.data)||void 0===t?void 0:t.actionInfo)||{}).popupInfo;r&&l(r)}}),[n]),(0,r.useEffect)((function(){var e;c&&(console.log("ComplianceTerm show"),(0,i.j)("pageView",{elementID:"common_widget_extension_compliance_term",pageName:"common_widget_extension",df_3:String((null==a||null===(e=a.extraInfo)||void 0===e?void 0:e.errorCode)||"client_no_code")}),console.log("ComplianceTerm, popupInfo= ",a))}),[a,c]),c?React.createElement(de,{popupInfo:a}):null}var he=n(9284),me=n(6731);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),l=new k(o||[]);return r(a,"_invoke",{value:x(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function h(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==t&&n.call(y,i)&&(m=y);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,i,a,l){var c=s(e[r],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==ve(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),c(g,l,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ge(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ge(i,r,o,a,l,"next",e)}function l(e){ge(i,r,o,a,l,"throw",e)}a(void 0)}))}}var we=function(){var e=be(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.post)("/bapi/composite/v1/private/growth/marketing/consent-pop-up",{source:"Web"});case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t={};case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=be(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.post)("/bapi/composite/v1/private/growth/marketing/consent-status",{marketingConsentStatus:t,source:"Web"});case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n={data:!1};case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ee=[/^\/[a-zA-Z-]+\/need-kyc(\/.*)?/i,/^\/[a-zA-Z-]+\/kyc-entry(\/.*)?/i,/^\/[a-zA-Z-]+\/kyc-center(\/.*)?/i,/^\/[a-zA-Z-]+\/about-legal(\/.*)?/i],_e=S.cachePromiseStore.checkCacheBeforeRequest("getShowMarketingConsent",(0,d.requestAfterCheckLogin)(we)),Se="NTEwMzc1ODYwMTo4aThubklsaWVtTGZDUnZTN1ZyTzhIV2hCdEJFaDE2Zw==",ke={A:{title:"ba-marketing-consent-popup-title1",desc:"ba-marketing-consent-popup-desc1"},B:{title:"ba-marketing-consent-popup-title2",desc:"ba-marketing-consent-popup-desc2"},C:{title:"ba-marketing-consent-popup-title3",desc:"ba-marketing-consent-popup-desc3"},D:{title:"ba-marketing-consent-popup-title4",desc:"ba-marketing-consent-popup-desc4"}},Le="market_consent_popup";function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(){Ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),l=new k(o||[]);return r(a,"_invoke",{value:x(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function h(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==t&&n.call(y,i)&&(m=y);var g=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,i,a,l){var c=s(e[r],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Ce(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),c(g,l,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Oe(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var je=function(){var e,t,n,o,l,c=(0,d.useNavI18n)().getI18nTxt,s=(0,d.useThemis)([Se]).value,f=null==s||null===(e=s[Se])||void 0===e?void 0:e.Marketing_Consent_String_Versions,p=(t=(0,S.useAsync)(_e,[]),n=t.value,{loading:t.loading,value:!!(n||{}).data}).value,h=(0,a.s)().pushNotify,m=(o=(0,r.useState)(!1),l=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(o,l)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(o,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=m[0],y=m[1],g=ke[f||"A"]||{title:"ba-marketing-consent-popup-title1",desc:"ba-marketing-consent-popup-desc1"},b=g.title,w=g.desc,x=(0,r.useCallback)(function(){var e,t=(e=Ie().mark((function e(t){var n,r,o;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.j)("webClick",{pageName:Le,elementID:t?"web_click_market_consent_ok":"web_click_market_consent_close"}),e.next=3,xe(t);case 3:n=e.sent,r=n.data,o=n.message,r?y(!1):h({title:o,message:""});case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Oe(i,r,o,a,l,"next",e)}function l(e){Oe(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[h]);return(0,r.useEffect)((function(){p?(y(!0),(0,i.j)("pageView",{elementID:"web_view_market_consent",pageName:Le})):y(!1)}),[p]),v?React.createElement($.PopupModal,{visible:v},React.createElement(q.Z,{icon:React.createElement(me.Z,null),title:c(b),description:c(w),actions:React.createElement(he.Z,{style:{gap:"var( --space-2xs)"}},React.createElement(u.Z,{style:{flex:1},variant:"secondary",className:"w-full",onClick:function(){return x(!1)}},c("ba-no")),React.createElement(u.Z,{style:{flex:1},variant:"primary",className:"w-full",onClick:function(){return x(!0)}},c("ba-yes")))})):null};const Te=function(){var e=(0,d.useUserLoginStatus)().value,t=(0,r.useMemo)((function(){if(!S.isClient)return!1;var e=window.location.pathname;return!Ee.some((function(t){return t.test(e)}))}),[]);return e&&t?React.createElement(je,null):null},Re=function(){var e=b().bodyTheme;return(0,r.useEffect)((function(){(0,i.j)("pageView",{elementID:"common_widget_extension_mount",pageName:"common_widget_extension"})}),[]),React.createElement($.ErrorBundary,{name:"common-widget-extension"},React.createElement($.ThemeProvider,{theme:e,className:"_CWC"},React.createElement(a.Z,null,React.createElement("div",{className:"extension-container hidden-in-bnc-app common-widget-css_wrap theme-root bg1 ".concat(e,"-color")},React.createElement(A,null),React.createElement(pe,null),React.createElement(le,null),React.createElement(F,null),React.createElement(_,null),React.createElement(Te,null)))))}},1024:t=>{t.exports=e},314:e=>{e.exports=t},3408:e=>{e.exports=n},1182:e=>{e.exports=r},1458:e=>{e.exports=o},6748:e=>{e.exports=i},1996:e=>{e.exports=a}},u={};function s(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={id:e,loaded:!1,exports:{}};return c[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=c,l=[],s.O=(e,t,n,r)=>{if(!t){var o=1/0;for(u=0;u<l.length;u++){for(var[t,n,r]=l[u],i=!0,a=0;a<t.length;a++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](t[a])))?t.splice(a--,1):(i=!1,r<o&&(o=r));if(i){l.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=l.length;u>0&&l[u-1][2]>r;u--)l[u]=l[u-1];l[u]=[t,n,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.j=898,(()=>{var e={898:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,a,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(l)var u=l(s)}for(t&&t(n);c<i.length;c++)o=i[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},n=this.webpackChunkUMD=this.webpackChunkUMD||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var f=s.O(void 0,[736],(()=>s(3299)));return s.O(f)})()));